# 상관관계

## 기본 개념

두 변수 간에 서로 얼마나 함께 변하는 정도를 나타내는 통계적 개념. 값의 범위는 -1부터 +1까지임.
- **+1**: 완벽한 양의 상관관계 (하나가 증가하면 다른 하나도 비례하여 증가)
- **-1**: 완벽한 음의 상관관계 (하나가 증가하면 다른 하나는 비례하여 감소)
- **0**: 상관관계 없음

### 상관계수의 종류
- **피어슨 (Pearson)**: 가장 널리 사용되며, 두 연속 변수 간의 **선형 관계**를 측정함. 값 자체가 비례하는 관계(키와 몸무게 등)에 적합.
- **스피어맨 (Spearman)**: 값의 순위(Rank)를 기반으로 **단조 관계**(한 변수가 증가할 때 다른 변수가 반드시 증가하거나 감소하는 관계)를 측정함. 비선형 관계나 이상치(Outlier)가 있는 데이터에 강건함.
- **켄달 (Kendall)**: 순위의 일관성을 기반으로 측정. 표본 크기가 작거나 이상치가 많을 때 스피어만보다 안정적인 경향이 있음.

---

## 상관관계 분석 방법

### 시각화를 통한 분석 (히트맵)
- **상관관계 히트맵**: 모든 변수 쌍 간의 상관계수를 색상으로 시각화하여 전체적인 관계를 빠르게 파악할 수 있음. 붉은색 계열은 양의 상관, 푸른색 계열은 음의 상관을 나타냄.
- **피어슨 vs 스피어맨 차이 분석**: 두 상관계수 값의 차이를 히트맵으로 시각화하면, 그 차이가 클수록 두 변수 간의 관계가 **비선형적**임을 의미함.

### 산점도를 통한 비선형 관계 분석
- 히트맵에서 선형 관계가 뚜렷하지 않더라도, 산점도를 통해 U자형, 지수형, 로그형 등 다양한 비선형 관계를 발견할 수 있음. 회귀선을 추가하면 데이터의 전반적인 트렌드를 파악하는 데 도움이 됨.

---

## 고급 상관관계 분석 기법

### 켄달 타우 (Kendall's Tau)
- 두 변수 간의 순서쌍이 얼마나 일치하는지를 측정하는 순위 기반 상관계수. p-value를 함께 제공하여 통계적 유의성을 검증할 수 있음.

### 상호 정보량 (Mutual Information)
- 한 변수가 다른 변수에 대해 제공하는 정보의 양을 측정. 선형/비선형 관계없이 두 변수가 얼마나 강하게 연관되어 있는지를 나타냄. (값의 범위: 0 ~ ∞)
- 상관계수와 달리 관계의 방향성(+/-)은 알려주지 않지만, 두 변수가 통계적으로 독립적인지 판단하는 데 유용함.

### 조건부 상관관계 (Conditional Correlation)
- 전체 데이터가 아닌, 특정 조건(그룹) 하에서 두 변수의 상관관계가 어떻게 변하는지 분석하는 기법. (예: VIP 고객 그룹과 일반 고객 그룹에서 '총구매액'과 '상품 다양성'의 상관관계가 어떻게 다른지 비교)
- 이를 통해 특정 고객 세그먼트의 숨겨진 행동 패턴을 발견할 수 있음.

---

## 범주형 변수의 연관성 분석

### 크래머 V (Cramér's V)
- 두 **범주형 변수** 간의 연관성 강도를 측정함. (값의 범위: 0 ~ 1)
- 0이면 두 변수는 독립적, 1이면 완벽하게 연관되어 있음을 의미.

### 분산 분석 (ANOVA)
- **범주형 변수**와 **연속형 변수** 간의 관계를 분석하는 데 사용됨.
- F-통계량과 p-value를 통해, 범주형 변수의 각 그룹 간에 연속형 변수의 평균값이 통계적으로 유의미하게 다른지를 검증함. (예: 국가별 평균 구매액에 차이가 있는지 분석)

---

## 다중공선성 (Multicollinearity)

### 정의 및 문제점
- 회귀 분석 모델에서 독립 변수들 간에 강한 상관관계가 나타나는 문제.
- 다중공선성이 높으면 특정 변수의 영향력을 개별적으로 파악하기 어려워 모델의 해석을 방해하고, 예측 성능을 불안정하게 만들 수 있음.

### 분산 팽창 계수 (VIF, Variance Inflation Factor)
- 다중공선성을 진단하는 대표적인 지표.
- **VIF > 10**: 일반적으로 다중공선성이 심각하여 조치가 필요한 수준으로 판단.
- **VIF > 5**: 주의가 필요한 수준으로, 변수 선택을 고려해볼 수 있음.
