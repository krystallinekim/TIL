# 정적(Static) 멤버

- 정적 멤버는 클래스에 고정된 멤버로 **객체를 생성하지 않고** 사용할 수 있는 필드와 메소드를 말한다.

- 정적 멤버는 인스턴스에 소속된 멤버가 아니라 클래스에 소속된 멤버이기 때문에 클래스 멤버라고도 한다.

- 클래스가 로드될 때 생성되고 프로그램이 종료되면 소멸한다.

## 정적 멤버 선언

- 정적 멤버를 선언하는 방법은 필드와 메소드 선언 시 `static` 키워드를 붙여주면 된다.
    - 필드를 선언할 때 객체들이 공유할 목적의 데이터라면 정적 필드로 선언한다.
    - 메소드를 선언할 때 메소드 내부에서 정적 멤버를 사용하거나 일반 필드를 사용하지 않는다면 정적 메소드로 선언한다.

- static 필드에 접근하는 getter, setter는 똑같이 static 메소드로 만들어서 쓴다
    - static을 쓰는 이유가 객체 만들지 않고 쓰려는건데, 정적 멤버에 접근하는 메소드를 일반 메소드로 만들면 객체를 따로 만들어서 사용해야 한다
    ```java
    // java.lang에서 제공하는 Math 클래스의 일부
    public final class Math {
        public static int max(int a, int b) {
            return (a >= b) ? a : b;
        }
        
        public static int min(int a, int b) {
            return (a <= b) ? a : b;
        }
        ...
    }
    ```
    - `max()`, `min()`은 Math 클래스의 필드를 사용하지 않으니까, 정적 메소드로 선언

## 정적 멤버 사용

- static 멤버는 객체를 생성하지 않고 클래스 이름과 도트(.) 연산자로 접근한다. - `Math.random()`
    - 메소드에서 이름이 겹칠 경우, 지역변수쪽이 우선이고 static 필드는 `클래스명.필드명`으로 구분

- static 메소드에서 객체의 일반 멤버(필드, 메소드)에 접근할 수 없고, this 키워드를 사용할 수 없다.
    - 호출 시점에 객체가 없을 수 있다. 일반 필드나 메소드는 객체가 생성되는 시점에 생성되기 때문
    - 다른 static 멤버는 호출 가능함. 일반 멤버에서 static 멤버를 호출하는 것도 허용

- static 필드와 static 메소드는 객체 참조 변수로도 접근이 가능하지만, static 요소는 클래스 이름으로 접근하는 것이 좋다.
    
    ```java
    int max = Math.max(10, 20);
    int min = Math.min(10, 20);

    Math math = new Math();
    math.max(10, 20);  // 가능은 하지만, 권장은 안함
    ```
    

## final 필드와 상수

### final 필드

- final 필드는 초기값이 저장되면 이후 값을 변경할 수 없다.
    - setter는 만들수 없다

- final 필드의 초기값은 필드를 선언할 때 명시적으로 지정하는 방법과 생성자를 통해서 지정하는 방법이 있다.
    - 초기값을 지정하지 않으면 기본값(null, 0, ...)으로 저장되는데, 저장된 순간 변경이 불가하므로 의미없는 필드가 된다 
    
    ```java
    public class Member {
        // 1. 명시적 초기화
        public final String gender = "male";
        
        // 2. 생성자를 통해 final 필드 초기화
        public Member(String gender) {
            this.gender = gender;
        }
    }
    ```
    

### 상수(static final)

- 상수는 어디서나 같은 값이어야 하고(공용성), 더이상 수정할 수 없어야 한다.
    - `final 필드`는 한 번 초기화되면 수정할 수 없는 필드지만 객체마다 다른 값으로 초기화될 수 있기 때문에 상수라고 하지 않는다.
    - `static final 필드`는 객체마다 저장되지 않고, 클래스에만 포함되고 한 번 초기값이 저장되면 변경할 수 없기 때문에 상수라고 한다.

- 상수의 이름은 모두 대문자로 작성하는 것이 관례이고 서로 다른 단어가 혼합된 이름이라면 언더바(_)로 단어들을 구분한다.
    
    ```java
    // java.lang에서 제공하는 Math 클래스
    public final class Math {
        public static final double PI = 3.14159265358979323846;
        private static final double DEGREES_TO_RADIANS = 0.017453292519943295;
        ...
    }
    ```

## 초기화 블록

- 필드를 초기화하는 블록으로, 객체 생성 시마다 실행되고 초기화함

- 명시적으로 초기화해도 되는데, 단순한 값이 아니라 복잡한 계산식이나 코드가 들어가면 블럭을 만들어서 초기화함
    - 일반 필드는 생성자에서 해줘도 되는데, static 필드는 생성자가 없어 static 블록을 사용한다

### 필드의 초기화 순서

1. 필드
    1) 초기화 생략 시
        - JVM이 정한 기본값으로 초기화(null, 0, false, ...)
        ```java
        private String name;  // null
        ```

    2) 명시적 초기화
        ```java
        `private String name = "홍길동";
        ```

    3) 초기화 블록(인스턴스 블록)
        ```java
        {
            name = 이몽룡;
        }
        ```
        - 객체가 생성될 때마다 초기화된다
        - 생성자보다 먼저 실행됨
    4) 생성자를 이용한 초기화
        ```java
        public InitBlock() {
            this.name = "임꺽정";
        }
        ```

    - 여러 초기화 수단이 동시에 나온다면, 생략(null) - 명시(홍길동) - 초기화 블록(이몽룡) - 생성자(임꺽정) 순으로 덮어쓴다
        - 주로 명시적/생성자 이용 초기화를 이용함
        - 일반 필드에서의 초기화 블록은 잘 사용하지 않는다. 생성자에서 같은 작업을 할 수 있기 때문

2. static 필드
    
    - static 필드는 생성자가 없다

    1) 초기화 생략 시
        - JVM이 정한 기본값으로 초기화(null, 0, false, ...)
        ```java
        private static int age;  // 0
        ```

    2) 명시적 초기화
        ```java
        private static int age = 10;
        ```

    3) 초기화 블록(static 블록)
        ```java
        static {
            age = 20;
        }
        ```
        - static 필드를 초기화하는 블록
        - 클래스가 로드될 때 1번 실행되고 초기화됨

    - 생략(0) - 명시(10) - 초기화 블록(20) 순으로 덮어씀
